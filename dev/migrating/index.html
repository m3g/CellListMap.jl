<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Migrating from 0.9 · CellListMap.jl</title><meta name="title" content="Migrating from 0.9 · CellListMap.jl"/><meta property="og:title" content="Migrating from 0.9 · CellListMap.jl"/><meta property="twitter:title" content="Migrating from 0.9 · CellListMap.jl"/><meta name="description" content="Documentation for CellListMap.jl."/><meta property="og:description" content="Documentation for CellListMap.jl."/><meta property="twitter:description" content="Documentation for CellListMap.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img class="docs-light-only" src="../assets/logo.svg" alt="CellListMap.jl logo"/><img class="docs-dark-only" src="../assets/logo-dark.svg" alt="CellListMap.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">CellListMap.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Overview</a></li><li><a class="tocitem" href="../neighborlists/">Neighbor lists</a></li><li><a class="tocitem" href="../ParticleSystem/introduction/">ParticleSystem</a></li><li><a class="tocitem" href="../ParticleSystem/single_set_simple/">Single set: Simple outputs</a></li><li><a class="tocitem" href="../ParticleSystem/single_set_compound/">Single set: Compound outputs</a></li><li><a class="tocitem" href="../ParticleSystem/two_sets/">Two sets of particles</a></li><li><a class="tocitem" href="../ParticleSystem/updating/">Updating the system</a></li><li><a class="tocitem" href="../ParticleSystem/options/">Options</a></li><li><a class="tocitem" href="../ParticleSystem/examples/">Complete examples</a></li><li><a class="tocitem" href="../unitcell/">Unitcell requirements</a></li><li><a class="tocitem" href="../ecosystem/">Ecosystem integration</a></li><li><a class="tocitem" href="../API/">Public Interface</a></li><li><a class="tocitem" href="../citation/">Citation</a></li><li class="is-active"><a class="tocitem" href>Migrating from 0.9</a><ul class="internal"><li><a class="tocitem" href="#Neighbor-lists-updates"><span>Neighbor lists updates</span></a></li><li><a class="tocitem" href="#ParticleSystem-interface-updates"><span>ParticleSystem interface updates</span></a></li><li><a class="tocitem" href="#Low-level-interface"><span>Low-level interface</span></a></li><li><a class="tocitem" href="#Python-interface"><span>Python interface</span></a></li><li><a class="tocitem" href="#Summary-of-breaking-changes"><span>Summary of breaking changes</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Migrating from 0.9</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Migrating from 0.9</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/m3g/CellListMap.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/m3g/CellListMap.jl/blob/main/docs/src/migrating.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Migrating-from-0.9"><a class="docs-heading-anchor" href="#Migrating-from-0.9">Migrating from 0.9</a><a id="Migrating-from-0.9-1"></a><a class="docs-heading-anchor-permalink" href="#Migrating-from-0.9" title="Permalink"></a></h1><p>This guide helps users migrate from CellListMap version 0.9.x to version 0.10.0.</p><h2 id="Neighbor-lists-updates"><a class="docs-heading-anchor" href="#Neighbor-lists-updates">Neighbor lists updates</a><a id="Neighbor-lists-updates-1"></a><a class="docs-heading-anchor-permalink" href="#Neighbor-lists-updates" title="Permalink"></a></h2><p>The <code>neighborlist</code> and <code>neighborlist!</code> functions remain mostly unchanged in their interface, except for the removal of the <code>autoswap</code> option.</p><h3 id="Removal-of-autoswap"><a class="docs-heading-anchor" href="#Removal-of-autoswap">Removal of <code>autoswap</code></a><a id="Removal-of-autoswap-1"></a><a class="docs-heading-anchor-permalink" href="#Removal-of-autoswap" title="Permalink"></a></h3><p>The <code>autoswap</code> option, which was deprecated in version 0.9.16, has been completely removed in 0.10.0. This option was previously used to automatically swap the sets of particles to optimize performance when computing neighbor lists between two sets of particles with different sizes.</p><p><strong>Migration</strong>: If you were using <code>autoswap=true</code> (which was the default), you may experience some performance regression for smaller systems. For most use cases, simply remove the <code>autoswap</code> keyword argument:</p><pre><code class="language-julia hljs"># Before (0.9.x)
neighborlist(x, y, cutoff; autoswap=true)

# After (0.10.0)
neighborlist(x, y, cutoff)</code></pre><h2 id="ParticleSystem-interface-updates"><a class="docs-heading-anchor" href="#ParticleSystem-interface-updates">ParticleSystem interface updates</a><a id="ParticleSystem-interface-updates-1"></a><a class="docs-heading-anchor-permalink" href="#ParticleSystem-interface-updates" title="Permalink"></a></h2><h3 id="Renaming-of-map_pairwise!-to-pairwise!"><a class="docs-heading-anchor" href="#Renaming-of-map_pairwise!-to-pairwise!">Renaming of <code>map_pairwise!</code> to <code>pairwise!</code></a><a id="Renaming-of-map_pairwise!-to-pairwise!-1"></a><a class="docs-heading-anchor-permalink" href="#Renaming-of-map_pairwise!-to-pairwise!" title="Permalink"></a></h3><p>The function <code>map_pairwise!</code> has been renamed to <code>pairwise!</code>:</p><pre><code class="language-julia hljs"># Before (0.9.x)
u = map_pairwise!(f, system)

# After (0.10.0)
u = pairwise!(f, system)</code></pre><h3 id="Removal-of-pairwise-(without-!)"><a class="docs-heading-anchor" href="#Removal-of-pairwise-(without-!)">Removal of <code>pairwise</code> (without <code>!</code>)</a><a id="Removal-of-pairwise-(without-!)-1"></a><a class="docs-heading-anchor-permalink" href="#Removal-of-pairwise-(without-!)" title="Permalink"></a></h3><p>The non-mutating <code>pairwise</code> function has been removed. This change emphasizes that the function always mutates the <code>output</code> field of the <code>ParticleSystem</code> object:</p><pre><code class="language-julia hljs"># Before (0.9.x)
u = pairwise(f, system)

# After (0.10.0)
u = pairwise!(f, system)  # always use the mutating version</code></pre><h3 id="Simplified-mapped-function-signature"><a class="docs-heading-anchor" href="#Simplified-mapped-function-signature">Simplified mapped function signature</a><a id="Simplified-mapped-function-signature-1"></a><a class="docs-heading-anchor-permalink" href="#Simplified-mapped-function-signature" title="Permalink"></a></h3><p>The signature of the mapped function has been simplified. Instead of receiving individual arguments, the function now receives a <code>NeighborPair</code> object containing all pair information:</p><pre><code class="language-julia hljs"># Before (0.9.x)
function f(x, y, i, j, d2, output)
    d = sqrt(d2)
    # ... compute something
    return output
end

# After (0.10.0)
function f(pair, output)
    (; x, y, i, j, d2, d) = pair  # destructuring
    # ... compute something
    return output
end</code></pre><p>The <code>NeighborPair</code> object contains the fields:</p><ul><li><code>x</code>, <code>y</code>: positions of the two particles (minimum-image convention applied)</li><li><code>i</code>, <code>j</code>: indices of the particles in the original arrays</li><li><code>d2</code>: squared distance between the particles</li><li><code>d</code>: distance between the particles (<strong>lazily computed</strong> - only calculated when accessed)</li></ul><p>The lazy computation of <code>d</code> is particularly useful when your function only needs the squared distance <code>d2</code>, avoiding unnecessary <code>sqrt</code> calls.</p><h3 id="New-pairwise!(f,-x,-sys)-method"><a class="docs-heading-anchor" href="#New-pairwise!(f,-x,-sys)-method">New <code>pairwise!(f, x, sys)</code> method</a><a id="New-pairwise!(f,-x,-sys)-method-1"></a><a class="docs-heading-anchor-permalink" href="#New-pairwise!(f,-x,-sys)-method" title="Permalink"></a></h3><p>A new method has been added that allows computing pairwise interactions between a new set of particles <code>x</code> and the particles already in the system <code>sys</code>. This is useful for reusing the same cell list for cross-computations with different sets of particles, and replaces previous uses of the <code>autoswap=false</code> option:</p><pre><code class="language-julia hljs">sys = ParticleSystem(positions=y, cutoff=cutoff, output=0.0)
# Compute interactions between particles in x and those in sys
u = pairwise!(f, x, sys)</code></pre><h3 id="Output-resetting-behavior"><a class="docs-heading-anchor" href="#Output-resetting-behavior">Output resetting behavior</a><a id="Output-resetting-behavior-1"></a><a class="docs-heading-anchor-permalink" href="#Output-resetting-behavior" title="Permalink"></a></h3><p>The handling of the initial output value has changed:</p><ul><li><strong>Before (0.9.x)</strong>: The <code>output</code> was reset to zero always, and the initial value given to <code>ParticleSystem</code> was ignored. </li><li><strong>After (0.10.0)</strong>: The <code>output</code> is reset to <code>zero(typeof(output))</code> by default at each <code>pairwise!</code> call, but the <code>reset=false</code> option can be used to accumulate with the initial value.</li></ul><p>To skip the automatic resetting (useful for accumulating results), use the <code>reset=false</code> keyword:</p><pre><code class="language-julia hljs"># Reset output to zero before computation (default)
pairwise!(f, system)

# Keep current output value and accumulate
pairwise!(f, system; reset=false)</code></pre><h2 id="Low-level-interface"><a class="docs-heading-anchor" href="#Low-level-interface">Low-level interface</a><a id="Low-level-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Low-level-interface" title="Permalink"></a></h2><p>The previous &quot;low-level interface&quot; using <code>Box</code>, <code>CellList</code>, and <code>pairwise!(f, output, box, cl)</code> directly is now internal and no longer exported or part of the public API.</p><p><strong>Migration</strong>: Use the <code>ParticleSystem</code> interface instead. The <code>ParticleSystem</code> interface provides all the functionality of the low-level interface with a simpler and more user-friendly API.</p><pre><code class="language-julia hljs"># Before (0.9.x) - Low-level interface
box = Box(sides, cutoff)
cl = CellList(x, box)
u = map_pairwise!((pair, u) -&gt; f(pair, u), 0.0, box, cl)

# After (0.10.0) - ParticleSystem interface
sys = ParticleSystem(positions=x, cutoff=cutoff, unitcell=sides, output=0.0)
u = pairwise!(f, sys)</code></pre><p>For iterative computations where the particle positions change:</p><pre><code class="language-julia hljs"># Before (0.9.x)
box = Box(sides, cutoff)
cl = CellList(x, box)
for step in 1:nsteps
    x = new_positions()
    UpdateCellList!(x, box, cl)
    u = map_pairwise!(f, 0.0, box, cl)
end

# After (0.10.0)
sys = ParticleSystem(positions=x, cutoff=cutoff, unitcell=sides, output=0.0)
for step in 1:nsteps
    sys.xpositions .= new_positions()  # update coordinates directly
    u = pairwise!(f, sys)
end</code></pre><p>See the <a href="../ParticleSystem/introduction/#ParticleSystem-interface">ParticleSystem</a> and <a href="../ParticleSystem/updating/#Updating-the-system">Updating the system</a> sections for more details on using the <code>ParticleSystem</code> interface.</p><h2 id="Python-interface"><a class="docs-heading-anchor" href="#Python-interface">Python interface</a><a id="Python-interface-1"></a><a class="docs-heading-anchor-permalink" href="#Python-interface" title="Permalink"></a></h2><p>The Python interface has been discontinued in version 0.10.0.</p><h2 id="Summary-of-breaking-changes"><a class="docs-heading-anchor" href="#Summary-of-breaking-changes">Summary of breaking changes</a><a id="Summary-of-breaking-changes-1"></a><a class="docs-heading-anchor-permalink" href="#Summary-of-breaking-changes" title="Permalink"></a></h2><table><tr><th style="text-align: left">Change</th><th style="text-align: left">0.9.x</th><th style="text-align: left">0.10.0</th></tr><tr><td style="text-align: left">Pairwise mapping function</td><td style="text-align: left"><code>map_pairwise!</code></td><td style="text-align: left"><code>pairwise!</code></td></tr><tr><td style="text-align: left">Alias for &quot;non-mutating&quot; pairwise</td><td style="text-align: left"><code>pairwise</code></td><td style="text-align: left">Removed</td></tr><tr><td style="text-align: left">Output reset behavior</td><td style="text-align: left">Manual</td><td style="text-align: left">Automatic (use <code>reset=false</code> to skip)</td></tr><tr><td style="text-align: left">Low-level interface</td><td style="text-align: left">Exported</td><td style="text-align: left">Internal (use <code>ParticleSystem</code>)</td></tr><tr><td style="text-align: left"><code>autoswap</code> option</td><td style="text-align: left">Deprecated</td><td style="text-align: left">Removed (use <code>pairwise!(f, x, sys)</code>)</td></tr><tr><td style="text-align: left">Python interface</td><td style="text-align: left">Available</td><td style="text-align: left">Discontinued</td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../citation/">« Citation</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.16.1 on <span class="colophon-date" title="Friday 20 February 2026 10:56">Friday 20 February 2026</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
